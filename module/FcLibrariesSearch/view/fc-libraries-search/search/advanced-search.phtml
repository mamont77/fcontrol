<ul class="breadcrumb">
    <li><a href="/">Home</a> <span class="divider">/</span></li>
    <li><a href="<?= $this->url('zfcadmin/libraries', array('action' => 'index')); ?>">Libraries</a> <span
            class="divider">/</span></li>
    <li>Advanced search</li>
</ul>
<?php
$title = 'Advanced search';
$this->headTitle($title);
?>

<?php
$displayOptions = array(
    'elements' => array(
        'text' => array(
            'required' => true,
        ),
    ),
);

//Form object
$form = $this->form;
//$formType = \DluTwBootstrap\Form\FormUtil::FORM_TYPE_SEARCH;
$validData = $this->validData;
$form->prepare();

$form = $this->form;
$form->setAttribute('action', $this->url('zfcadmin/advanced_search', array('action' => 'advancedSearch')));
$form->prepare();
if ($form->getMessages()):
    ?>
    <div class="alert alert-error">
        <button class="close" data-dismiss="alert" type="button">Ã—</button>
        <strong>Invalid input!</strong>
        The form field are not filled out correctly.
    </div>
<?php
endif;
?>

<div id="advancedSearchForm">
    <?php
    echo $this->formTwb($form, $formType, $displayOptions);
    ?>
</div>
<? if (count($result) > 0): ?>
<div id="advancedSearchResult">
    <legend>Search Result</legend>

    <?php
    switch ($library) {
        case 'library_aircraft':
            $widgetName = 'aircraftTable';
            break;

        case 'library_aircraft_type':
            $widgetName = 'aircraftTypeTable';
            break;

        case 'library_air_operator':
            $widgetName = 'airOperatorTable';
            break;

        case 'library_airport':
            $widgetName = 'airportTable';
            break;

        case 'library_city':
            $widgetName = 'cityTable';
            break;

        case 'library_country':
            $widgetName = 'countryTable';
            break;

        case 'library_currency':
            $widgetName = 'currencyTable';
            break;

        case 'library_kontragent':
            $widgetName = 'kontragentTable';
            break;

        case 'library_region':
            $widgetName = 'regionTable';
            break;

        case 'library_unit':
            $widgetName = 'unitTable';
            break;

        default:
            // skip it
            break;
    }
    ?>

    <?php echo $this->partial('widgets/' . $widgetName . '.phtml', array('result' => $result)); ?>

</div>
<? endif; ?>

